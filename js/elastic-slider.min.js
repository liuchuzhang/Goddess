function ElasticSlider(t,i){this.el="string"==typeof t?document.querySelector(t):t,this.init(i)}ElasticSlider.prototype={init:function(t){if(this.items=this.el.children,this.len=this.items.length,this.len<3)throw new Error("ElasticSlider must have at least 3 items.");this.mouseDown=!1,this.animating=!1,this.width=0,this.maxStretch=t&&t.hasOwnProperty("maxStretch")?parseFloat(t.maxStretch):100,this.bezierLen=t&&t.hasOwnProperty("bezierLen")?parseFloat(t.bezierLen):80,this.rect=this.el.getBoundingClientRect(),this.sliderWidth=this.rect.width,this.sliderHeight=this.rect.height,this.initOrder(),this.initSVG(),this.initPaths(),this.initEvents()},initOrder:function(){this.currentIndex=0,this.updateElements(),this.addClasses()},initSVG:function(){this._svgNS="http://www.w3.org/2000/svg",this.clippedLeft=document.createElementNS(this._svgNS,"clipPath"),this.clippedRight=document.createElementNS(this._svgNS,"clipPath"),this.clippedLeft.id="clipped-left",this.clippedRight.id="clipped-right",this.s=new Snap(this.sliderWidth,this.sliderHeight),this.s.select("defs").node.appendChild(this.clippedLeft),this.s.select("defs").node.appendChild(this.clippedRight),this.el.appendChild(this.s.node)},initPaths:function(){this.optionsLeft={x1:0,y1:0,y2:this.sliderHeight,width:0,bezierLen:this.bezierLen,offset:this.sliderWidth,leftSide:!0},this.optionsLeftAux={x1:0,y1:0,y2:this.sliderHeight,width:0,bezierLen:this.bezierLen,offset:this.sliderWidth,leftSide:!0},this.curveLeft=this.createPath(this.optionsLeft),this.pLeft=this.s.path(this.curveLeft).attr({transform:"t-"+this.sliderWidth+", 0"}),this.optionsRight={x1:this.sliderWidth,y1:0,y2:this.sliderHeight,width:0,bezierLen:this.bezierLen,offset:this.sliderWidth},this.optionsRightAux={x1:this.sliderWidth,y1:0,y2:this.sliderHeight,width:0,bezierLen:this.bezierLen,offset:this.sliderWidth},this.curveRight=this.createPath(this.optionsRight),this.pRight=this.s.path(this.curveRight).attr({transform:"t-"+this.sliderWidth+", 0"}),this.clippedLeft.appendChild(this.pLeft.node),this.clippedRight.appendChild(this.pRight.node)},createPath:function(t){var i=t.x1,e=t.y1,s=i,n=t.y2,h=i+t.width,a=(n-e)/2,r=t.bezierLen,o=t.offset,p=["M",i+o,e,"C",i+o,e+r,h+o,a-r,h+o,a,"S",s+o,n-r,s+o,n,"L"];return t.leftSide?p.push(i,n,"L",i,e):p.push(i+2*o,n,"L",i+2*o,e),p.join(" ")},initEvents:function(){this.initDown(),this.initUp(),this.initMove()},initDown:function(){var t=this;t.el.onmousedown=function(i){t.animating||(t.mouseDown=!0,t.initialX=i.pageX)}},initUp:function(){var t=this;document.onmouseup=function(){t.mouseDown&&!t.animating&&(t.mouseDown=!1,t.pLeft.stop().animate({path:t.curveLeft},200,mina.easeout),t.pRight.stop().animate({path:t.curveRight},200,mina.easeout))}},initMove:function(){var t=this;t.el.onmousemove=function(i){t.mouseDown&&!t.animating&&(t.width=i.pageX-t.initialX,i.pageX>t.initialX?t.prevAnimation():t.nextAnimation())}},prevAnimation:function(){var t=this;if(t.pRight.stop().attr({path:t.curveRight}),t.width<t.maxStretch)t.optionsLeftAux.width=t.width,t.pLeft.stop().attr({d:t.createPath(t.optionsLeftAux)});else{t.mouseDown=!1,t.animating=!0,t.optionsLeft.x1=2*t.maxStretch,t.optionsLeft.width=3*-t.maxStretch/4;var i=t.createPath(t.optionsLeft);t.optionsLeft.x1=2*t.maxStretch,t.optionsLeft.width=t.maxStretch/4;var e=t.createPath(t.optionsLeft);t.optionsLeft.x1=3*t.maxStretch,t.optionsLeft.width=0;var s=t.createPath(t.optionsLeft);t.pLeft.stop().animate({transform:"t-"+(3*t.maxStretch-50)+",0"},300,mina.easein,function(){t.pLeft.animate({transform:"t-"+3*t.maxStretch+",0"},200,mina.easein)}),t.pLeft.animate({path:i},200,mina.easein,function(){t.pLeft.animate({path:e},100,mina.easein,function(){t.pLeft.animate({path:s},200,mina.easein,function(){t.prev(),t.updateStates(),t.pLeft.stop().attr({d:t.curveLeft,transform:"t-"+t.sliderWidth+", 0"}),t.animating=!1})})})}},nextAnimation:function(){var t=this;if(t.pLeft.stop().attr({path:t.curveLeft}),t.width>-t.maxStretch)t.optionsRightAux.width=t.width,t.pRight.stop().attr({d:t.createPath(t.optionsRightAux)});else{t.mouseDown=!1,t.animating=!0,t.pRight.stop().animate({path:t.curveRight},2e3,mina.elastic),t.optionsRight.x1=t.sliderWidth-2*t.maxStretch,t.optionsRight.width=3*t.maxStretch/4;var i=t.createPath(t.optionsRight);t.optionsRight.x1=t.sliderWidth-2*t.maxStretch,t.optionsRight.width=-t.maxStretch/4;var e=t.createPath(t.optionsRight);t.optionsRight.x1=t.sliderWidth-3*t.maxStretch,t.optionsRight.width=0;var s=t.createPath(t.optionsRight);t.pRight.stop().animate({transform:"t-"+(2*t.sliderWidth-(3*t.maxStretch-50))+",0"},300,mina.easein,function(){t.pRight.animate({transform:"t-"+(2*t.sliderWidth-3*t.maxStretch)+",0"},200,mina.easein)}),t.pRight.animate({path:i},200,mina.easein,function(){t.pRight.animate({path:e},100,mina.easein,function(){t.pRight.animate({path:s},200,mina.easein,function(){t.next(),t.updateStates(),t.pRight.stop().attr({d:t.curveRight,transform:"t-"+t.sliderWidth+", 0"}),t.animating=!1})})})}},prev:function(){this.currentIndex=this.getPrevIndex()},next:function(){this.currentIndex=this.getNextIndex()},getPrevIndex:function(){return this.currentIndex>0?this.currentIndex-1:this.len-1},getNextIndex:function(){return this.currentIndex+1<this.len?this.currentIndex+1:0},updateStates:function(){this.removeClasses(),this.updateElements(),this.addClasses()},removeClasses:function(){this.currentItem.classList.remove("current"),this.prevItem.classList.remove("clipped-left"),this.nextItem.classList.remove("clipped-right")},updateElements:function(){this.currentItem=this.items[this.currentIndex],this.prevItem=this.items[this.getPrevIndex()],this.nextItem=this.items[this.getNextIndex()]},addClasses:function(){this.currentItem.classList.add("current"),this.prevItem.classList.add("clipped-left"),this.nextItem.classList.add("clipped-right")}};